<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<title>Page 266</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<style type="text/css">
<!--
	p {margin: 0; padding: 0;}	.ft00{font-size:8px;font-family:DejaVuSerif;color:#000000;}
	.ft01{font-size:9px;font-family:DejaVuSerif;color:#000000;}
	.ft02{font-size:9px;font-family:DejaVuSerif;color:#dc461d;}
	.ft03{font-size:8px;font-family:DejaVuSerif;color:#dc461d;}
	.ft04{font-size:7px;font-family:DejaVuSerif;color:#000000;}
	.ft05{font-size:8px;line-height:13px;font-family:DejaVuSerif;color:#000000;}
	.ft06{font-size:9px;line-height:13px;font-family:DejaVuSerif;color:#000000;}
	.ft07{font-size:8px;line-height:10px;font-family:DejaVuSerif;color:#000000;}
-->
</style>
</head>
<body bgcolor="#A0A0A0" vlink="blue" link="blue">
<div id="page266-div" style="position:relative;width:892px;height:1263px;">
<img width="892" height="1263" src="ALL-07052021266.png" alt="background image"/>
<p style="position:absolute;top:74px;left:59px;white-space:nowrap" class="ft00">33</p>
<p style="position:absolute;top:119px;left:59px;white-space:nowrap" class="ft01">I've&#160;been&#160;getting&#160;that&#160;on&#160;kernel&#160;upgrades&#160;for&#160;a&#160;while,&#160;with&#160;the&#160;result&#160;that&#160;not&#160;all&#160;of&#160;my&#160;</p>
<p style="position:absolute;top:121px;left:479px;white-space:nowrap" class="ft00">dkms</p>
<p style="position:absolute;top:119px;left:504px;white-space:nowrap" class="ft01">&#160;drivers&#160;get&#160;updated&#160;on&#160;kernel-upgrades.</p>
<p style="position:absolute;top:145px;left:59px;white-space:nowrap" class="ft01">Firstly&#160;I&#160;was&#160;able&#160;to&#160;workaround&#160;the&#160;problem&#160;by&#160;reconfiguring&#160;any&#160;packages&#160;that&#160;used&#160;</p>
<p style="position:absolute;top:146px;left:480px;white-space:nowrap" class="ft00">dkms</p>
<p style="position:absolute;top:145px;left:506px;white-space:nowrap" class="ft01">&#160;to&#160;force&#160;them&#160;to&#160;be&#160;recompiled&#160;for&#160;the&#160;current&#160;kernel&#160;-&#160;eg&#160;it&#160;was&#160;my</p>
<p style="position:absolute;top:159px;left:59px;white-space:nowrap" class="ft01">AMD&#160;video&#160;drivers&#160;that&#160;failed&#160;(package&#160;==&#160;</p>
<p style="position:absolute;top:160px;left:272px;white-space:nowrap" class="ft00">fglrx</p>
<p style="position:absolute;top:159px;left:294px;white-space:nowrap" class="ft01">):</p>
<p style="position:absolute;top:192px;left:67px;white-space:nowrap" class="ft00">sudo&#160;dpkg-reconfigure&#160;fglrx</p>
<p style="position:absolute;top:221px;left:59px;white-space:nowrap" class="ft01">That&#160;would&#160;at&#160;least&#160;get&#160;the&#160;drivers&#160;configured&#160;for&#160;the&#160;current&#160;version.</p>
<p style="position:absolute;top:245px;left:59px;white-space:nowrap" class="ft01">Finally&#160;I&#160;found&#160;this&#160;bug,&#160;which&#160;includes&#160;some&#160;steps&#160;you&#160;can&#160;use&#160;to&#160;diagnose:&#160;</p>
<p style="position:absolute;top:245px;left:428px;white-space:nowrap" class="ft02">https://bugs.launchpad.net/ubuntu/+source/dkms/+bug/830915</p>
<p style="position:absolute;top:277px;left:67px;white-space:nowrap" class="ft05">dkms&#160;status<br/>ls&#160;-R&#160;/var/lib/dkms</p>
<p style="position:absolute;top:320px;left:59px;white-space:nowrap" class="ft06">Basically&#160;what&#160;they're&#160;doing&#160;is&#160;looking&#160;around&#160;for&#160;anything&#160;that&#160;is&#160;surprising,&#160;or&#160;unexpected&#160;-&#160;eg&#160;packages&#160;you&#160;have&#160;uninstalled&#160;-&#160;or&#160;software&#160;you&#160;have&#160;manually<br/>installed&#160;on&#160;an&#160;earlier&#160;ubuntu&#160;version&#160;and&#160;may&#160;not&#160;work&#160;with&#160;the&#160;newer&#160;version.&#160;Particularly&#160;check&#160;the&#160;date-stamp&#160;on&#160;the&#160;directories&#160;which&#160;might&#160;show&#160;you<br/>particularly&#160;old&#160;packages&#160;could&#160;be&#160;from&#160;manually&#160;installed&#160;packages.</p>
<p style="position:absolute;top:380px;left:67px;white-space:nowrap" class="ft00">ls&#160;-l&#160;/var/lib/dkms</p>
<p style="position:absolute;top:409px;left:59px;white-space:nowrap" class="ft01">In&#160;my&#160;case&#160;I&#160;had&#160;an&#160;old&#160;version&#160;of&#160;the&#160;</p>
<p style="position:absolute;top:411px;left:245px;white-space:nowrap" class="ft00">fglrx</p>
<p style="position:absolute;top:409px;left:267px;white-space:nowrap" class="ft01">&#160;install&#160;I&#160;had&#160;used&#160;to&#160;diagnose&#160;some&#160;problems&#160;a&#160;year&#160;ago&#160;and&#160;had&#160;simply&#160;re-named&#160;it.&#160;Deleting&#160;this&#160;old&#160;cruft&#160;made&#160;the</p>
<p style="position:absolute;top:424px;left:59px;white-space:nowrap" class="ft01">problem&#160;go&#160;away.</p>
<p style="position:absolute;top:448px;left:59px;white-space:nowrap" class="ft06">If&#160;there's&#160;junk&#160;delete&#160;it&#160;(or&#160;move&#160;it&#160;out&#160;of&#160;that&#160;directory)&#160;-&#160;if&#160;there's&#160;a&#160;manually&#160;installed&#160;package&#160;there,&#160;consider&#160;updating&#160;it,&#160;or&#160;uninstalling&#160;it&#160;and&#160;using&#160;the<br/>maintained&#160;version.</p>
<p style="position:absolute;top:474px;left:59px;white-space:nowrap" class="ft07">Share<br/>Improve&#160;this&#160;answer<br/>answered&#160;Dec&#160;23&#160;'12&#160;at&#160;0:11</p>
<p style="position:absolute;top:524px;left:59px;white-space:nowrap" class="ft03">Greg</p>
<p style="position:absolute;top:524px;left:80px;white-space:nowrap" class="ft00">Greg</p>
<p style="position:absolute;top:534px;left:59px;white-space:nowrap" class="ft00">1,193</p>
<p style="position:absolute;top:535px;left:92px;white-space:nowrap" class="ft04"><b>9</b></p>
<p style="position:absolute;top:535px;left:108px;white-space:nowrap" class="ft04"><b>15</b></p>
<p style="position:absolute;top:544px;left:59px;white-space:nowrap" class="ft00">3</p>
<p style="position:absolute;top:555px;left:78px;white-space:nowrap" class="ft00">&#160;Thank&#160;you&#160;for&#160;this,&#160;the&#160;problem&#160;I&#160;had&#160;was&#160;with&#160;the&#160;nvidia-340&#160;driver...&#160;–&#160;</p>
<p style="position:absolute;top:555px;left:382px;white-space:nowrap" class="ft03">ionreflex</p>
<p style="position:absolute;top:555px;left:418px;white-space:nowrap" class="ft00">&#160;</p>
<p style="position:absolute;top:555px;left:421px;white-space:nowrap" class="ft03">Oct&#160;21&#160;'15&#160;at&#160;13:52</p>
<p style="position:absolute;top:565px;left:78px;white-space:nowrap" class="ft07">&#160;1<br/>I&#160;had&#160;the&#160;same&#160;issue&#160;with&#160;anbox&#160;–&#160;</p>
<p style="position:absolute;top:575px;left:220px;white-space:nowrap" class="ft03">Airfield20</p>
<p style="position:absolute;top:575px;left:262px;white-space:nowrap" class="ft00">&#160;</p>
<p style="position:absolute;top:575px;left:264px;white-space:nowrap" class="ft03">Jun&#160;9&#160;'18&#160;at&#160;12:44</p>
<p style="position:absolute;top:585px;left:78px;white-space:nowrap" class="ft07">&#160;1<br/>mine&#160;problem&#160;was&#160;in&#160;vboxhost.&#160;Thanks!&#160;–&#160;</p>
<p style="position:absolute;top:595px;left:252px;white-space:nowrap" class="ft03">Drey</p>
<p style="position:absolute;top:595px;left:272px;white-space:nowrap" class="ft00">&#160;</p>
<p style="position:absolute;top:595px;left:274px;white-space:nowrap" class="ft03">Dec&#160;8&#160;'19&#160;at&#160;16:45</p>
<p style="position:absolute;top:613px;left:59px;white-space:nowrap" class="ft03">Add&#160;a&#160;comment</p>
<p style="position:absolute;top:613px;left:124px;white-space:nowrap" class="ft00">&#160;&#160;|&#160;</p>
<p style="position:absolute;top:623px;left:59px;white-space:nowrap" class="ft00">36</p>
<p style="position:absolute;top:668px;left:59px;white-space:nowrap" class="ft01">This&#160;is&#160;usually&#160;caused&#160;by&#160;modules&#160;in&#160;</p>
<p style="position:absolute;top:670px;left:239px;white-space:nowrap" class="ft00">/var/lib/dkms</p>
<p style="position:absolute;top:668px;left:297px;white-space:nowrap" class="ft01">&#160;that&#160;don't&#160;have&#160;a&#160;</p>
<p style="position:absolute;top:670px;left:386px;white-space:nowrap" class="ft00">dkms.conf</p>
<p style="position:absolute;top:668px;left:432px;white-space:nowrap" class="ft01">&#160;file&#160;within&#160;their&#160;source&#160;subdirectories&#160;-&#160;</p>
<p style="position:absolute;top:670px;left:628px;white-space:nowrap" class="ft00">dkms</p>
<p style="position:absolute;top:668px;left:653px;white-space:nowrap" class="ft01">&#160;expects&#160;this&#160;file,&#160;so&#160;will&#160;report&#160;an&#160;error&#160;if</p>
<p style="position:absolute;top:683px;left:59px;white-space:nowrap" class="ft01">it's&#160;missing,&#160;and&#160;then&#160;may&#160;miss&#160;out&#160;on&#160;compiling&#160;some&#160;valid&#160;modules.</p>
<p style="position:absolute;top:707px;left:59px;white-space:nowrap" class="ft01">To&#160;find&#160;the&#160;offending&#160;module,&#160;run&#160;this&#160;short&#160;script&#160;(thanks&#160;to&#160;</p>
<p style="position:absolute;top:707px;left:354px;white-space:nowrap" class="ft02">Lekensteyn</p>
<p style="position:absolute;top:707px;left:408px;white-space:nowrap" class="ft01">):</p>
<p style="position:absolute;top:739px;left:67px;white-space:nowrap" class="ft00">for&#160;i&#160;in&#160;/var/lib/dkms/*/[^k]*/source;&#160;do&#160;[&#160;-e&#160;&#34;$i&#34;&#160;]&#160;||&#160;echo&#160;&#34;$i&#34;;done</p>
<p style="position:absolute;top:768px;left:59px;white-space:nowrap" class="ft06">That&#160;will&#160;output&#160;any&#160;dkms&#160;module&#160;directories;&#160;you&#160;can&#160;then&#160;decide&#160;whether&#160;to&#160;uninstall&#160;the&#160;package&#160;that&#160;created&#160;them,&#160;or&#160;if&#160;they've&#160;been&#160;manually&#160;installed&#160;or<br/>renamed,&#160;to&#160;move&#160;them&#160;somewhere&#160;else&#160;or&#160;remove&#160;them.</p>
<p style="position:absolute;top:795px;left:59px;white-space:nowrap" class="ft07">Share<br/>Improve&#160;this&#160;answer<br/>answered&#160;Jun&#160;15&#160;'15&#160;at&#160;23:43</p>
<p style="position:absolute;top:845px;left:59px;white-space:nowrap" class="ft03">David&#160;Fraser</p>
<p style="position:absolute;top:845px;left:113px;white-space:nowrap" class="ft00">David&#160;Fraser</p>
<p style="position:absolute;top:855px;left:59px;white-space:nowrap" class="ft00">1,317</p>
<p style="position:absolute;top:856px;left:92px;white-space:nowrap" class="ft04"><b>1</b></p>
<p style="position:absolute;top:856px;left:108px;white-space:nowrap" class="ft04"><b>13</b></p>
<p style="position:absolute;top:856px;left:128px;white-space:nowrap" class="ft04"><b>21</b></p>
<p style="position:absolute;top:865px;left:59px;white-space:nowrap" class="ft00">3</p>
<p style="position:absolute;top:875px;left:78px;white-space:nowrap" class="ft07">&#160;3<br/>Perfect.&#160;The&#160;other&#160;answers&#160;may&#160;apply&#160;to&#160;specific&#160;instances,&#160;but&#160;this&#160;very&#160;quickly&#160;demonstrated&#160;where&#160;the&#160;issue&#160;was&#160;(and&#160;it&#160;was&#160;really&#160;a&#160;non-issue,&#160;as&#160;certain&#160;software&#160;was&#160;copying&#160;old<br/>installations&#160;to&#160;a&#160;/var/lib/dkms/*.old&#160;directory).&#160;–&#160;</p>
<p style="position:absolute;top:895px;left:281px;white-space:nowrap" class="ft03">Auspex</p>
<p style="position:absolute;top:895px;left:311px;white-space:nowrap" class="ft00">&#160;</p>
<p style="position:absolute;top:895px;left:314px;white-space:nowrap" class="ft03">Dec&#160;29&#160;'15&#160;at&#160;17:31</p>
<p style="position:absolute;top:905px;left:78px;white-space:nowrap" class="ft00">&#160;In&#160;case&#160;nvidia&#160;is&#160;the&#160;offender&#160;e.g.&#160;/var/lib/dkms/nvidia/396.24/source&#160;is&#160;the&#160;output,&#160;check&#160;there&#160;are&#160;already&#160;newer&#160;versions&#160;in&#160;/var/lib/dkms/nvidia&#160;and&#160;remove&#160;the&#160;offending&#160;one.&#160;–&#160;</p>
<p style="position:absolute;top:905px;left:824px;white-space:nowrap" class="ft03">Flatron</p>
<p style="position:absolute;top:916px;left:78px;white-space:nowrap" class="ft03">Jul&#160;17&#160;'18&#160;at&#160;7:31</p>
<p style="position:absolute;top:926px;left:78px;white-space:nowrap" class="ft00">&#160;Thanks!&#160;In&#160;my&#160;case&#160;the&#160;offender&#160;was&#160;open-vm-tools&#160;packages,&#160;and&#160;after&#160;purging&#160;I&#160;had&#160;to&#160;remember&#160;to&#160;run&#160;apt&#160;auto-remove,&#160;as&#160;a&#160;dependency&#160;was&#160;causing&#160;this&#160;problem.&#160;–&#160;</p>
<p style="position:absolute;top:926px;left:786px;white-space:nowrap" class="ft03">Elliptical&#160;view</p>
<p style="position:absolute;top:936px;left:78px;white-space:nowrap" class="ft03">Nov&#160;12&#160;'19&#160;at&#160;19:50</p>
<p style="position:absolute;top:954px;left:59px;white-space:nowrap" class="ft03">Add&#160;a&#160;comment</p>
<p style="position:absolute;top:954px;left:124px;white-space:nowrap" class="ft00">&#160;&#160;|&#160;</p>
<p style="position:absolute;top:964px;left:59px;white-space:nowrap" class="ft00">16</p>
<p style="position:absolute;top:1009px;left:59px;white-space:nowrap" class="ft01">I&#160;have&#160;had&#160;this&#160;problem&#160;with&#160;VirtualBox&#160;from&#160;Oracle's&#160;ppa,&#160;rather&#160;than&#160;the&#160;one&#160;packaged&#160;with&#160;12.04&#160;LTS&#160;:</p>
<p style="position:absolute;top:1042px;left:67px;white-space:nowrap" class="ft05">Error!&#160;Could&#160;not&#160;locate&#160;dkms.conf&#160;file.<br/>File:&#160;&#160;does&#160;not&#160;exist.</p>
<p style="position:absolute;top:1085px;left:59px;white-space:nowrap" class="ft01">I&#160;copied&#160;the&#160;contents&#160;of&#160;/var/lib/dkms&#160;to&#160;another&#160;directory&#160;as&#160;a&#160;backup,&#160;then&#160;removed&#160;the&#160;vboxhost&#160;directory&#160;in&#160;/var/lib/dkms;</p>
<p style="position:absolute;top:1117px;left:67px;white-space:nowrap" class="ft05">mkdir&#160;~/backup_dkms<br/>cp&#160;-r&#160;/var/lib/dkms/*&#160;~/backup_dkms&#160;<br/>rm&#160;-rf&#160;/var/lib/dkms/vboxhost</p>
<p style="position:absolute;top:1173px;left:59px;white-space:nowrap" class="ft01">I&#160;then&#160;reconfigured&#160;the&#160;virtualbox&#160;package&#160;like&#160;this:</p>
<p style="position:absolute;top:57px;left:66px;white-space:nowrap" class="ft00">Active</p>
<p style="position:absolute;top:57px;left:106px;white-space:nowrap" class="ft00">Oldest</p>
<p style="position:absolute;top:57px;left:146px;white-space:nowrap" class="ft00">Votes</p>
</div>
</body>
</html>
